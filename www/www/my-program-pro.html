<!DOCTYPE html>

<html class="dark" lang="fr">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Programme 7 Jours Gratuit - Coach Transformation AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="js/program-logic.js"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#49e619",
                        "background-light": "#f6f8f6",
                        "background-dark": "#152111",
                        "surface-dark": "#1E291B",
                        "surface-light": "#ffffff",
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "full": "9999px" },
                    boxShadow: {
                        'neon': '0 0 15px rgba(73, 230, 25, 0.3)',
                        'neon-strong': '0 0 25px rgba(73, 230, 25, 0.5)',
                    }
                },
            },
        }
    </script>
    <style>
        /* Custom scrollbar for webkit */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #2c3829;
            border-radius: 10px;
        }

        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
    <style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
</head>

<body class="bg-gray-100 dark:bg-black font-display flex items-center justify-center min-h-screen p-0 sm:p-4">
    <!-- Mobile App Container -->
    <div
        class="relative flex flex-col h-[100dvh] w-full max-w-md bg-background-light dark:bg-background-dark sm:rounded-[3rem] shadow-2xl overflow-hidden ring-8 ring-black/5 dark:ring-white/5">
        <!-- TopAppBar -->
        <header
            class="flex items-center justify-between p-4 pb-2 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md sticky top-0 z-30">
            <button onclick="window.location.href='/dashboard.html'"
                class="text-slate-800 dark:text-white flex size-12 shrink-0 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors">
                <span class="material-symbols-outlined text-[24px]">arrow_back</span>
            </button>
            <h2 class="text-slate-800 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center truncate"
                id="program-title-header">Mon Programme</h2>
            <div class="flex w-12 items-center justify-end">
                <button
                    class="flex items-center justify-center rounded-full h-12 w-12 text-slate-800 dark:text-white hover:bg-black/5 dark:hover:bg-white/10 transition-colors">
                    <span class="material-symbols-outlined text-[24px]">settings</span>
                </button>
            </div>
        </header>
        <!-- Main Scrollable Area -->
        <main class="flex-1 overflow-y-auto overflow-x-hidden pb-40" id="main-content">
            <!-- HeadlineText & Insight Badge -->
            <div class="px-4 pt-4 pb-2">
                <div
                    class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 mb-3">
                    <span class="material-symbols-outlined text-primary text-[16px]">auto_awesome</span>
                    <span class="text-primary text-xs font-bold uppercase tracking-wide">Généré par IA</span>
                </div>
                <h2 class="text-slate-900 dark:text-white tracking-tight text-[28px] font-bold leading-tight text-left"
                    id="program-headline">Votre plan personnalisé</h2>
                <p class="text-slate-500 dark:text-[#a4b89d] mt-2 text-sm leading-relaxed" id="program-subtitle">
                    Chargement de votre programme...
                </p>
            </div>

            <!-- DYNAMIC CONTENT WILL BE INJECTED HERE -->
            <div id="dynamic-schedule" class="mt-4 space-y-4 px-4"></div>

        </main>
        <!-- Sticky CTA Footer (PAYWALL) -->
        <div id="paywall-footer" class="absolute bottom-0 left-0 w-full z-40 hidden">
            <!-- Gradient fade for smooth transition -->
            <div class="h-12 w-full bg-gradient-to-b from-transparent to-background-light dark:to-background-dark">
            </div>
            <div class="bg-background-light dark:bg-background-dark px-4 pb-8 pt-2">
                <div
                    class="bg-slate-900 dark:bg-surface-dark border border-slate-800 dark:border-white/10 rounded-2xl p-5 shadow-2xl relative overflow-hidden">
                    <!-- Glow effect background -->
                    <div
                        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-primary/5 rounded-full blur-2xl">
                    </div>
                    <div class="relative z-10 flex flex-col gap-3">
                        <div class="flex justify-between items-center">
                            <h3 class="text-white text-lg font-bold leading-tight">Prêt à transformer votre corps ?</h3>
                            <span
                                class="bg-primary/20 text-primary text-[10px] font-bold px-2 py-1 rounded border border-primary/30">-50%
                                OFF</span>
                        </div>
                        <p class="text-gray-400 text-xs">Accédez aux 6 jours restants, aux recettes détaillées et au
                            chat avec l'IA.</p>
                        <button onclick="window.location.href='/subscription.html'"
                            class="flex w-full cursor-pointer items-center justify-center rounded-full h-12 bg-primary text-background-dark gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0 shadow-neon hover:shadow-neon-strong transition-shadow">
                            <span class="material-symbols-outlined text-[20px]">lock_open</span>
                            Débloquer la suite du programme
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Load Program from Local Storage (Serverless flow)
            const program = WorkoutLogic.loadFromLocal();

            if (!program) {
                document.getElementById('program-subtitle').textContent = "Aucun programme trouvé. Veuillez recommencer le questionnaire.";
                return;
            }

            document.getElementById('program-title-header').textContent = program.title;
            document.getElementById('program-headline').textContent = program.title;
            document.getElementById('program-subtitle').textContent = "Voici votre plan d'action personnalisé.";

            const container = document.getElementById('dynamic-schedule');

            // Show Paywall Footer if not premium (Simplified for MVP)
            if (!program.isPremium) {
                document.getElementById('paywall-footer').classList.remove('hidden');
            }

            program.schedule.forEach((day, index) => {
                const isLocked = !program.isPremium && index > 0;

                // Active/Unlocked Card
                if (!isLocked) {
                    const html = `
                <div class="relative bg-white dark:bg-surface-dark rounded-xl p-0 overflow-hidden shadow-lg border border-slate-200 dark:border-white/5 mb-6">
                    <div class="p-5 pb-0">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold bg-primary text-background-dark px-2 py-1 rounded uppercase tracking-wider">${day.day}</span>
                            <span class="material-symbols-outlined text-primary">lock_open</span>
                        </div>
                        <h1 class="text-slate-900 dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] text-left mb-4">${day.activity}</h1>
                    </div>
                    <div class="p-5 pt-0">
                        <div class="bg-slate-50 dark:bg-[#1a2416] p-4 rounded-lg mt-2 text-sm text-gray-300">
                            ${day.details}
                        </div>
                    </div>
                </div>`;
                    container.insertAdjacentHTML('beforeend', html);
                } else {
                    // Locked Card
                    const html = `
                <div class="flex items-center gap-4 p-4 rounded-xl bg-white dark:bg-surface-dark border border-slate-200 dark:border-white/5 opacity-60 grayscale hover:grayscale-0 hover:opacity-100 transition-all cursor-pointer group mb-3" onclick="window.location.href='/subscription.html'">
                    <div class="flex shrink-0 size-12 items-center justify-center rounded-full bg-slate-100 dark:bg-[#2c3829] group-hover:bg-primary/20 transition-colors">
                        <span class="text-slate-500 dark:text-white text-sm font-bold group-hover:text-primary">J${index + 1}</span>
                    </div>
                    <div class="flex flex-col flex-1">
                        <p class="text-slate-900 dark:text-white text-base font-bold leading-normal">${day.day}</p>
                        <p class="text-slate-500 dark:text-[#a4b89d] text-sm font-normal leading-normal">Contenu Premium</p>
                    </div>
                    <span class="material-symbols-outlined text-slate-400 dark:text-gray-500 text-[20px]">lock</span>
                </div>`;
                    container.insertAdjacentHTML('beforeend', html);
                }
            });
        });
    </script>
</body>

</html>